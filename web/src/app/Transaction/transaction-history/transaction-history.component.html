<app-main-transactions></app-main-transactions>
<div class="tw-w-full tw-max-w-4xl tw-mt-8">
  <div class="tw-flex justify-center mb-6 space-x-6 tw-gap-4">
    <p-dropdown
      [options]="statusOptions"
      [(ngModel)]="selectedStatus"
      optionLabel="label"
      placeholder="Filter by Status"
      class="w-48"
      [showClear]="true"
      (onChange)="applyFilters()"
    ></p-dropdown>
    <p-dropdown
      [options]="amountRangeOptions"
      [(ngModel)]="selectedAmountRange"
      optionLabel="label"
      placeholder="Filter by Amount"
      class="w-48"
      [showClear]="true"
      (onChange)="applyFilters()"
    ></p-dropdown>
    <p-dropdown
      [options]="dateRangeOptions"
      [(ngModel)]="selectedDateRange"
      optionLabel="label"
      placeholder="Filter by Date"
      class="w-48"
      [showClear]="true"
      (onChange)="applyFilters()"
    ></p-dropdown>
    <p-dropdown
      [options]="sortOptions"
      [(ngModel)]="selectedSort"
      optionLabel="label"
      placeholder="Sort By"
      class="w-48"
      [showClear]="true"
      (onChange)="onSortChange()"
    ></p-dropdown>
  </div>

  <p-table [value]="(transactions$ | async)||[]" [tableStyle]="{ 'min-width': '60rem' }" [paginator]="true" [rows]="10" [rowsPerPageOptions]="[10,25,50]" class="shadow-lg rounded-lg overflow-hidden">
    <ng-template pTemplate="header">
      <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal">
        <th class="py-3 px-6 text-left">Amount</th>
        <th class="py-3 px-6 text-left" pSortableColumn="dateOperation">Date</th>
        <th class="py-3 px-6 text-left" pSortableColumn="status">Status</th>
        <th class="py-3 px-6 text-left">Description</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-transaction>
      <tr class="border-b border-gray-200 hover:bg-gray-100">
        <td class="py-3 px-6 text-left whitespace-nowrap">{{ transaction.montant }}</td>
        <td class="py-3 px-6 text-left">{{ transaction.dateOperation }}</td>
        <td class="py-3 px-6 text-left">
          <p-tag [value]="transaction.status" [severity]="getSeverity(transaction.status)" class="font-semibold"></p-tag>
        </td>
        <td class="py-3 px-6 text-left">{{ transaction.description }}</td>
      </tr>
    </ng-template>
    <ng-template pTemplate="footer">
      <tr>
        <td colspan="4" class="py-3 px-6 text-right font-semibold text-gray-600">In total there are {{ filteredTransactions.length }} products.</td>
      </tr>
    </ng-template>
  </p-table>
</div>
